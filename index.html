<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mentex - Estudos Musicais 8 bits</title>
  <!-- Importa fonte pixelada do Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <style>
    /* Reset e básico */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      background: #000;
      color: #0ff; /* Ciano neon */
      font-family: 'Press Start 2P', cursive;
      font-size: 12px;
      line-height: 1.4;
      user-select: none;
    }
    h1, h2 {
      color: #0ff;
      text-shadow: 1px 1px #00aabb;
      margin: 20px;
      text-align: center;
    }
    header {
      background: #002233;
      padding: 10px 0;
      border-bottom: 3px solid #0ff;
      user-select: none;
    }
    /* Layout com sidebar */
    .container {
      display: flex;
      height: calc(100vh - 60px);
    }
    aside.sidebar {
      width: 180px;
      background: #001122;
      border-right: 3px solid #0ff;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      user-select: none;
    }
    aside.sidebar button {
      background: #003344;
      border: 2px solid #0ff;
      color: #0ff;
      font-size: 9px;
      padding: 10px 5px;
      cursor: pointer;
      text-align: center;
      transition: background 0.3s;
      letter-spacing: 1px;
      border-radius: 4px;
      user-select: none;
    }
    aside.sidebar button.active,
    aside.sidebar button:hover {
      background: #0ff;
      color: #002233;
      font-weight: bold;
    }
    /* Abas numeradas verticais dentro da sidebar */
    .abas-vertical {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      user-select: none;
    }
    .abas-vertical button {
      background: #002233;
      border: 1px solid #0ff;
      color: #0ff;
      font-size: 9px;
      padding: 6px 0;
      cursor: pointer;
      border-radius: 3px;
      user-select: none;
    }
    .abas-vertical button.active,
    .abas-vertical button:hover {
      background: #0ff;
      color: #002233;
      font-weight: bold;
    }
    /* Área principal */
    main.content {
      flex: 1;
      padding: 20px;
      background: #000;
      overflow-y: auto;
      user-select: text;
    }
    /* Form de post */
    form#post-form {
      margin-bottom: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      user-select: none;
    }
    form textarea {
      resize: vertical;
      min-height: 80px;
      font-family: 'Press Start 2P', cursive;
      font-size: 10px;
      background: #001122;
      color: #0ff;
      border: 2px solid #0ff;
      padding: 10px;
      border-radius: 5px;
      outline: none;
    }
    form select {
      font-family: 'Press Start 2P', cursive;
      font-size: 10px;
      padding: 5px;
      border: 2px solid #0ff;
      border-radius: 5px;
      background: #001122;
      color: #0ff;
      cursor: pointer;
    }
    form button {
      width: 120px;
      padding: 10px;
      font-family: 'Press Start 2P', cursive;
      font-size: 10px;
      background: #0ff;
      border: none;
      color: #002233;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s;
      align-self: flex-start;
      user-select: none;
    }
    form button:hover {
      background: #00aabb;
    }
    /* Lista de posts */
    ul#posts-list {
      list-style: none;
      padding: 0;
      margin: 0;
      user-select: text;
    }
    ul#posts-list li {
      background: #001122;
      margin-bottom: 10px;
      padding: 10px;
      border: 2px solid #0ff;
      border-radius: 5px;
      position: relative;
      font-size: 10px;
      white-space: pre-wrap;
      user-select: text;
    }
    ul#posts-list li button.excluir-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: #ff0055;
      border: none;
      color: #fff;
      font-family: 'Press Start 2P', cursive;
      font-size: 8px;
      padding: 3px 6px;
      cursor: pointer;
      border-radius: 3px;
      user-select: none;
      transition: background 0.3s;
    }
    ul#posts-list li button.excluir-btn:hover {
      background: #cc0044;
    }
  </style>
</head>
<body>
  <header>
    <h1>Mentex - Estudos Musicais 8 bits</h1>
  </header>
  <div class="container">
    <aside class="sidebar">
      <button data-categoria="Todos" class="active">Todos</button>

      <button data-categoria="Melodias">Melodias</button>
      <div class="abas-vertical" id="abas-melodias" style="display:none;">
        <button data-cat="Melodias" data-numero="1">1</button>
        <button data-cat="Melodias" data-numero="2">2</button>
        <button data-cat="Melodias" data-numero="3">3</button>
        <button data-cat="Melodias" data-numero="4">4</button>
        <button data-cat="Melodias" data-numero="5">5</button>
      </div>

      <button data-categoria="Ideias">Ideias</button>
      <div class="abas-vertical" id="abas-ideias" style="display:none;">
        <button data-cat="Ideias" data-numero="1">1</button>
        <button data-cat="Ideias" data-numero="2">2</button>
        <button data-cat="Ideias" data-numero="3">3</button>
        <button data-cat="Ideias" data-numero="4">4</button>
        <button data-cat="Ideias" data-numero="5">5</button>
      </div>

      <button data-categoria="Composições">Composições</button>
      <div class="abas-vertical" id="abas-composicoes" style="display:none;">
        <button data-cat="Composições" data-numero="1">1</button>
        <button data-cat="Composições" data-numero="2">2</button>
        <button data-cat="Composições" data-numero="3">3</button>
        <button data-cat="Composições" data-numero="4">4</button>
        <button data-cat="Composições" data-numero="5">5</button>
      </div>
    </aside>
    <main class="content">
      <form id="post-form">
        <textarea id="post-text" placeholder="Escreva seu post aqui..."></textarea>
        <select id="categoria-select">
          <option value="Todos">Todos</option>
          <option value="Melodias">Melodias</option>
          <option value="Ideias">Ideias</option>
          <option value="Composições">Composições</option>
        </select>
        <button type="submit">Postar</button>
      </form>
      <ul id="posts-list">
        <!-- Posts aparecem aqui -->
      </ul>
    </main>
  </div>

  <script>
    // Dados dos posts: objeto com categorias, cada categoria tem abas 1-5 (menos "Todos" que só usa aba 1)
    const posts = {
      Todos: { 1: [] },
      Melodias: { 1: [], 2: [], 3: [], 4: [], 5: [] },
      Ideias: { 1: [], 2: [], 3: [], 4: [], 5: [] },
      Composições: { 1: [], 2: [], 3: [], 4: [], 5: [] },
    };

    let filtroCategoriaAtual = 'Todos';
    const filtroAbaAtual = {
      Todos: 1,
      Melodias: 1,
      Ideias: 1,
      Composições: 1
    };

    // Botões sidebar
    const sidebarButtons = document.querySelectorAll('aside.sidebar > button');
    // Botões abas verticais
    const abasButtons = document.querySelectorAll('.abas-vertical button');

    const postsList = document.getElementById('posts-list');
    const form = document.getElementById('post-form');
    const textarea = document.getElementById('post-text');
    const categoriaSelect = document.getElementById('categoria-select');

    // Renderiza os posts conforme categoria e aba selecionadas
    function renderPosts() {
      postsList.innerHTML = '';
      let listaPosts = [];

      if(filtroCategoriaAtual === 'Todos') {
        listaPosts = posts.Todos[1];
      } else {
        listaPosts = posts[filtroCategoriaAtual][filtroAbaAtual[filtroCategoriaAtual]];
      }

      if (listaPosts.length === 0) {
        const vazioLi = document.createElement('li');
        vazioLi.textContent = 'Nenhum post nesta aba.';
        vazioLi.style.fontStyle = 'italic';
        vazioLi.style.color = '#004444';
        postsList.appendChild(vazioLi);
        return;
      }

      listaPosts.forEach((post, index) => {
        const li = document.createElement('li');
        li.textContent = post.texto;

        const btnExcluir = document.createElement('button');
        btnExcluir.textContent = 'X';
        btnExcluir.className = 'excluir-btn';
        btnExcluir.onclick = () => {
          listaPosts.splice(index, 1);
          renderPosts();
        };

        li.appendChild(btnExcluir);
        postsList.appendChild(li);
      });
    }

    // Função para mostrar/ocultar abas verticalmente ao clicar na categoria
    function toggleAbas(categoria) {
      const abas = document.getElementById(`abas-${categoria.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '')}`);
      if (!abas) return false;

      if (abas.style.display === 'flex') {
        abas.style.display = 'none';
        return false;
      } else {
        abas.style.display = 'flex';
        return true;
      }
    }

    // Função para ativar categoria e abrir/fechar abas correspondentes
    function ativarCategoria(categoria) {
      if (filtroCategoriaAtual === categoria) {
        // Toggle abre/fecha abas
        const aberto = toggleAbas(categoria);
        // Atualiza classe active do botão
        document.querySelector(`aside.sidebar > button[data-categoria="${categoria}"]`).classList.toggle('active', aberto);
        return;
      }

      // Remove active de todos
      sidebarButtons.forEach(btn => btn.classList.remove('active'));
      // Seta active no clicado
      document.querySelector(`aside.sidebar > button[data-categoria="${categoria}"]`).classList.add('active');

      // Fecha todas abas
      ['melodias', 'ideias', 'composicoes'].forEach(cat => {
        const div = document.getElementById(`abas-${cat}`);
        if(div) div.style.display = 'none';
      });

      // Abre abas da categoria clicada (se não for Todos)
      if(categoria !== 'Todos') {
        const div = document.getElementById(`abas-${categoria.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '')}`);
        if(div) div.style.display = 'flex';
      }

      filtroCategoriaAtual = categoria;

      renderPosts();
    }

    // Função para ativar aba numerada
    function ativarAba(categoria, numero) {
      if(filtroAbaAtual[categoria] === numero) return;

      filtroAbaAtual[categoria] = numero;

      // Remove active de todas as abas da categoria
      const abasCategoria = document.querySelectorAll(`#abas-${categoria.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '')} button`);
      abasCategoria.forEach(btn => {
        btn.classList.toggle('active', btn.dataset.numero === numero.toString());
      });

      renderPosts();
    }

    // Eventos sidebar categorias
    sidebarButtons.forEach(btn => {
      btn.addEventListener('click', () => ativarCategoria(btn.dataset.categoria));
    });

    // Eventos abas numeradas
    abasButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const categoria = btn.dataset.cat;
        const num = btn.dataset.numero;
        ativarAba(categoria, num);
      });
    });

    // Ao postar
    form.addEventListener('submit', e => {
      e.preventDefault();
      const texto = textarea.value.trim();
      const categoria = categoriaSelect.value;

      if(!texto) return alert('Escreva algo para postar.');

      // Posts só podem ser feitos na categoria "Todos"
      if(categoria !== 'Todos') {
        alert('Posts só podem ser feitos na categoria "Todos".');
        return;
      }

      posts.Todos[1].unshift({ texto, categoria });

      textarea.value = '';
      categoriaSelect.value = 'Todos';

      // Volta para categoria Todos e aba 1
      ativarCategoria('Todos');
      ativarAba('Todos', 1);
    });

    // Inicializa mostrando Todos e aba 1 ativa
    ativarCategoria('Todos');
    ativarAba('Todos', 1);
    ativarAba('Melodias', 1);
    ativarAba('Ideias', 1);
    ativarAba('Composições', 1);

  </script>
</body>
</html>
